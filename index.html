<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Feqzin | Site Oficial</title>

  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.css"/>
  <link rel="stylesheet"
        href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css"
        integrity="sha512-SnH5WK+bZxgPHs44uWIX+LLJAJ9/2PkPKZ5QiAj6Ta86w+fsb2TkcmfRyVX3pBnMFcV7oQPJkl9QevSCWr3W6A=="
        crossorigin="anonymous" referrerpolicy="no-referrer"/>

  <style>
    /* ---- PALETA DE CORES ---- */
    :root {
      --cor-destaque: #1db954;
      --cor-destaque-hover: #1ed760;
      --cor-texto: #f1f1f1;
      --cor-fundo: #0e0e0e;
      --cor-fundo-secundario: #111;
      --cor-borda-suave: #444;
    }
    body {
      margin: 0;
      font-family: Arial, sans-serif;
      background: var(--cor-fundo);
      color: var(--cor-texto);
      line-height: 1.6;
    }
    header {
      background-color: rgba(0,0,0,0.6);
      background-blend-mode: darken;
      background-size: cover;
      background-position: center;
      padding: 360px 20px 40px;
      text-align: center;
      color: #fff;
      position: relative;
    }
    header::after {
      content: '';
      position: absolute;
      bottom: 0; left: 0;
      width: 100%; height: 100px;
      background: linear-gradient(to bottom, rgba(14,14,14,0), var(--cor-fundo));
      z-index: 1;
    }
    header h1, header p { position: relative; z-index: 2; }
    header h1 { font-size: 3em; margin-bottom: 10px; }
    header p { font-size: 1.2em; color: #ddd; }

    .profile-pic {
      width: 150px; height: 150px; border-radius: 50%;
      display: block; border: 4px solid var(--cor-destaque);
      object-fit: cover; background: #000;
      position: absolute; top: 190px; left: 50%;
      transform: translateX(-50%); z-index: 3;
      transition: transform .4s ease-in-out; transform-style: preserve-3d;
    }
    .profile-pic:hover {
      transform: translateX(-50%) perspective(1000px) rotateY(25deg);
    }

    section {
      padding: 40px 20px; max-width: 900px; margin: auto;
    }
    section:first-of-type { padding-top: 100px; }
    h2 { border-bottom: 2px solid var(--cor-borda-suave); padding-bottom: 10px; margin-bottom: 20px; }
    a { color: var(--cor-destaque); text-decoration: none; transition: color .3s; }
    a:hover { color: #fff; }

    .socials { text-align: center; }
    .socials a {
      margin: 0 15px; color: var(--cor-texto); font-size: 2em; transition: all .3s;
    }
    .socials a:hover {
      color: var(--cor-destaque); transform: translateY(-5px);
    }

    .player { margin: 20px 0; }
    .countdown {
      text-align: center; font-size: 2em; margin: 20px 0 10px;
      color: var(--cor-destaque); line-height: 1.2;
    }
    footer {
      background: var(--cor-fundo-secundario);
      text-align: center; padding: 20px;
      font-size: .9em; color: #777;
    }

    .swiper { width: 100%; padding-top: 20px; padding-bottom: 50px; }
    .swiper-slide { background-position: center; background-size: cover; width: 100%; }
    .video-container { position: relative; width: 100%; padding-top: 56.25%; }
    .video-container iframe {
      position: absolute; top: 0; left: 0; width: 100%; height: 100%;
      border-radius: 12px; border: 0;
    }
    .swiper-button-next, .swiper-button-prev { color: var(--cor-destaque); }
    .swiper-pagination-bullet-active { background: var(--cor-destaque); }

    .pre-save-button {
      display: inline-block; background: var(--cor-destaque); color: #fff;
      padding: 15px 35px; border-radius: 50px; font-weight: bold;
      font-size: 1.1em; margin-top: 20px; transition: background .3s, transform .2s;
    }
    .pre-save-button:hover {
      background: var(--cor-destaque-hover); transform: scale(1.05);
    }

    /* Dashboard do Fã */
    #fan-dashboard {
      background: #111; border: 2px solid var(--cor-destaque);
      border-radius: 12px; padding: 20px; max-width: 400px;
      margin: 40px auto; text-align: center;
    }
    #fan-dashboard form {
      display: flex; flex-direction: column; gap: 10px;
    }
    #fan-dashboard input {
      padding: 10px; border-radius: 6px; border: 1px solid var(--cor-borda-suave);
      background: #222; color: var(--cor-texto); font-size: 1em;
    }
    #fan-dashboard button {
      padding: 10px; border: none; border-radius: 6px;
      font-weight: bold; font-size: 1em; cursor: pointer;
      transition: background .3s;
    }
    #btn-login { background: var(--cor-destaque); color: #fff; }
    #btn-signup { background: #555; color: #ccc; }
    #btn-reset-password { background: #444; color: #ccc; }
    #btnLogout { display: none; background: #f44336; color: #fff; }
    #auth-message {
      margin-top: 15px; min-height: 1.2em; font-weight: bold;
    }
    #pontuacao-container {
      display: none; margin-top: 20px;
    }
    #start-quiz {
      display: none; margin-top: 20px; padding: 10px 20px;
      background: var(--cor-destaque); color: #fff;
      border: none; border-radius: 6px; font-weight: bold;
      cursor: pointer; transition: background .3s;
    }
    #start-quiz:hover {
      background: var(--cor-destaque-hover);
    }

    /* Seção de resgate */
    #resgate-section {
      display: block; max-width: 400px; margin: 40px auto;
    }
    #itens-resgate {
      display: flex; flex-direction: column; gap: 10px;
    }
    .item {
      border: 1px solid #ccc; padding: 10px; border-radius: 8px;
    }
    #resgate-msg { margin-top: 10px; font-weight: bold; }

    @media (max-width:600px) {
      header h1 { font-size: 2em; }
      .profile-pic { width: 120px; height: 120px; top: 210px; }
      section:first-of-type { padding-top: 80px; }
      header { padding: 320px 20px 40px; }
      #fan-dashboard { max-width: 90%; }
    }
  </style>
</head>
<body>
  <header id="header-capa">
    <h1>Feqzin</h1><p></p>
  </header>
  <img id="foto-perfil" class="profile-pic" src="" alt="Feqzin" />

  <section>
    <h2>Sobre</h2>
    <p>Feqzin é um artista nascido na zona norte de São Paulo... (texto existente)</p>
  </section>

  <section>
    <h2>Meus Vídeos</h2>
    <div class="swiper">
      <div class="swiper-wrapper" id="youtube-carousel-wrapper"></div>
      <div class="swiper-pagination"></div>
      <div class="swiper-button-prev"></div>
      <div class="swiper-button-next"></div>
    </div>
  </section>

  <section>
    <h2>Último Lançamento</h2>
    <div class="player">
      <iframe style="border-radius:12px"
        src="https://open.spotify.com/embed/track/1chtxFdUNshSXBjfrI8VmE?utm_source=generator"
        width="100%" height="152" frameborder="0"
        allow="autoplay; clipboard-write; encrypted-media; fullscreen; picture-in-picture"
        loading="lazy"></iframe>
    </div>
    <div id="countdown" class="countdown"></div>
    <div style="text-align:center;">
      <a class="pre-save-button"
         href="https://distrokid.com/hyperfollow/feqzin/se-a-bag-pesar"
         target="_blank">FAÇA O PRE-SAVE</a>
    </div>
  </section>

  <section>
    <h2>Redes Sociais</h2>
    <div class="socials">
      <!-- links existentes -->
    </div>
  </section>

  <section id="fan-dashboard">
    <h2>Dashboard do Fã</h2>
    <form id="auth-form">
      <input type="email" id="email" placeholder="Digite seu email" required autocomplete="username"/>
      <input type="password" id="password" placeholder="Digite sua senha" required autocomplete="current-password"/>
      <button type="submit" id="btn-login">Entrar</button>
      <button type="button"   id="btn-signup">Cadastrar</button>
      <button type="button"   id="btn-reset-password">Esqueci a senha</button>
      <button type="button"   id="btnLogout">Logout</button>
    </form>
    <div id="pontuacao-container">
      <h3>Sua Pontuação</h3>
      <p id="pontuacao-valor">0</p>
    </div>
    <button id="start-quiz">Comece a ganhar pontos</button>
    <div id="auth-message"></div>
  </section>

  <!-- Seção de Resgate -->
  <div id="resgate-section">
    <h2>Resgate seus prêmios</h2>
    <p>Você tem <span id="pontos-usuario">0</span> pontos.</p>
    <div id="itens-resgate">
      <div class="item">
        <p>Desconto de 10% (50 pontos)</p>
        <button onclick="resgatarItem(50,'Desconto de 10%')">Resgatar</button>
      </div>
      <div class="item">
        <p>Acesso antecipado (100 pontos)</p>
        <button onclick="resgatarItem(100,'Acesso antecipado')">Resgatar</button>
      </div>
      <div class="item">
        <p>Item exclusivo (200 pontos)</p>
        <button onclick="resgatarItem(200,'Item exclusivo')">Resgatar</button>
      </div>
      <div class="item">
        <p>Camisa oficial (500 pontos)</p>
        <button onclick="resgatarItem(500,'Camisa oficial')">Resgatar</button>
      </div>
    </div>
    <p id="resgate-msg"></p>
  </div>

  <footer>© 2025 Feqzin. Todos os direitos reservados.</footer>

  <script src="https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.js"></script>
  <script>
    document.addEventListener("DOMContentLoaded", () => {
      carregarConfiguracoes();
      carregarVideosDoYouTube();
      iniciarCountdown();
    });

    // ... funções carregarConfiguracoes, carregarVideosDoYouTube, iniciarCountdown (mantidas iguais)

    // Firebase
    const firebaseConfig = {
      apiKey: "AIzaSyBhSm...
    };
    firebase.initializeApp(firebaseConfig);
    const auth = firebase.auth();
    const db   = firebase.firestore();

    // Elementos
    const authForm   = document.getElementById("auth-form"),
          emailInput = document.getElementById("email"),
          pwdInput   = document.getElementById("password"),
          btnLogin   = document.getElementById("btn-login"),
          btnSignup  = document.getElementById("btn-signup"),
          btnReset   = document.getElementById("btn-reset-password"),
          btnLogout  = document.getElementById("btnLogout"),
          msgAuth    = document.getElementById("auth-message"),
          pontCont   = document.getElementById("pontuacao-container"),
          pontVal    = document.getElementById("pontuacao-valor"),
          btnQuiz    = document.getElementById("start-quiz"),
          ptsUserEl  = document.getElementById("pontos-usuario"),
          resgMsg    = document.getElementById("resgate-msg");

    // Mostrar pontos e botão quiz
    auth.onAuthStateChanged(async user => {
      if (user) {
        btnLogout.style.display = "inline-block";
        emailInput.style.display = pwdInput.style.display = btnLogin.style.display = btnSignup.style.display = btnReset.style.display = "none";

        // Carrega pontuação
        const doc = await db.collection("usuarios").doc(user.uid).get();
        const data = doc.data() || {};
        pontVal.textContent = data.pontos || 0;
        ptsUserEl.textContent = data.pontos || 0;
        pontCont.style.display = "block";

        // botão quiz
        btnQuiz.style.display = "inline-block";
        btnQuiz.onclick = () => window.open("quiz.html","_blank");

      } else {
        window.location.href = "login.html";
      }
    });

    // Login
    authForm.addEventListener("submit", e => {
      e.preventDefault();
      auth.signInWithEmailAndPassword(emailInput.value,pwdInput.value)
        .catch(err => {
          msgAuth.style.color = "tomato";
          msgAuth.textContent = `Erro no login: ${err.message}`;
        });
      authForm.reset();
    });

    // Signup
    btnSignup.onclick = () => {
      if (!emailInput.value||!pwdInput.value) {
        msgAuth.style.color = "tomato";
        msgAuth.textContent = "Preencha email e senha.";
        return;
      }
      auth.createUserWithEmailAndPassword(emailInput.value,pwdInput.value)
        .then(() => msgAuth.textContent = "Usuário criado! Faça login.")
        .catch(err => {
          msgAuth.style.color = "tomato";
          msgAuth.textContent = `Erro no cadastro: ${err.message}`;
        });
    };

    // Reset
    btnReset.onclick = () => {
      if (!emailInput.value) {
        msgAuth.style.color = "tomato";
        msgAuth.textContent = "Digite seu email para reset.";
        return;
      }
      auth.sendPasswordResetEmail(emailInput.value)
        .then(() => msgAuth.textContent = "E-mail de redefinição enviado.")
        .catch(err => {
          msgAuth.style.color = "tomato";
          msgAuth.textContent = `Erro: ${err.message}`;
        });
    };

    // Logout
    btnLogout.onclick = () => auth.signOut();

    // Resgate
    async function resgatarItem(custo,nomeItem){
      const user = auth.currentUser;
      if(!user) return;
      const ref = db.collection("usuarios").doc(user.uid);
      const snap = await ref.get();
      const data = snap.data()||{};
      const pontos = data.pontos||0;
      if(pontos>=custo){
        await ref.update({ pontos: firebase.firestore.FieldValue.increment(-custo) });
        resgMsg.style.color = "green";
        resgMsg.textContent = `Resgatado: ${nomeItem}`;
        const novo = await ref.get();
        const p = novo.data().pontos||0;
        pontVal.textContent = p;
        ptsUserEl.textContent = p;
      } else {
        resgMsg.style.color = "red";
        resgMsg.textContent = "Pontos insuficientes.";
      }
    }
  </script>
</body>
</html>
